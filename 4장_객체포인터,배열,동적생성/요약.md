# 객체 포인터, 배열, 동적 생성
## 객체 포인터
- 포인터 변수와 같으며, 단순 객체 또한 포인터를 사용할 수 있게 되었다고 생각하면 편할듯
- 포인터로 멤버를 접근할 때, -> 를 사용한다.
- 또는 *과 .을 이용한다
- 포인터에서 *은 포인터가 가리키는 실체라고 생각하면 될 듯
```cpp
Circle donut;
double d = donut.getArea();

Circle *p; // 객체 포인터 변수, Circle 이라는 타입의 포인터 변수라고 생각하면 될 듯
p = &donut; // donut 객체의 주소를 지정함
d = p -> getArea(); // -> 를 이용하여 donut 객체의 멤버에 접근
d = (*p).getArea(); // donut 객체의 멤버에 접근
```
## 객체 배열
- 클래스 타입의 배열이라고 생각하면 될 듯
	- Circle c[3];
	- Circle 타입의 배열
- 클래스 배열을 선언과 동시에 클래스의 기본 생성자가 실행된다.
- 때문에 선언과 동시에 매개변수가 있는 생성자를 원한다면 초기화를 진행해야한다.
- 그렇지 않다면 반드시 기본 생성자가 정의 되어있어야한다.
- 소멸자 또한 생성자의 역순으로 실행 된다.
	- Circle c[2]
	- c[0], c[1] 순서로 생성자 실행
	- c[1], c[0] 순서로 소멸자 실행
## 동적 메모리
### 정적 할당
- 변수 선언을 통해 필요한 메모리 할당
- 스택 메모리
- int a = 10;
### 동적 할당
- 필요한 양이 예측되지 않는 경우, 프로그램 작성시 할당 받을 수 없기에
- 실행 중에 힙 메모리에서 할당
### 동적 메모리 할당/반환
- C 언어에서는 malloc()/free() 를 사용
- C++ 에서는 new/delete 연산자 사용
### new 연산자
- 기본 타입 메모리(int, char 등등), 배열, 객체, 객체 배열 할당에 사용됨
### delete 연산자
- new 로 할당 받은 메모리만 반환
- new 로 할당 받은 메모리 외에는 오류
- 동일한 메모리를 여러 번 반환하면 오류, 한번만 하도록
### 기본 타입의 동적 할당 및 반환
1. 포인터 변수를 만들고
2. 초기화 할 때, new 데이터 타입
	- int *p = new int;
	- 선언과 동시에 초기화도 가능.
	- int *p = new int(10);
3. 반환 할 때, delete 포인터 변수
### 배열의 동적 할당 및 반환
- 반환 할 때, delete [] 포인터 변수
	- delete [] p;
- 선언할 때 배열 초기화는 불가능
	- int *p = new int[4];
### 객체의 동적 할당 및 반환
- 기본 타입과 같음
- 선언하면서 초기화도 가능, 매개변수 생성자도 이용가능
	- Circle *p = new Circle;
	- Circle *p = new Circle(10);
- 반환도 같음
	- delete p;
- 반환 시기에 따라 소멸하기에 순서를 조절할 수 있음.
### 객체 배열의 동적 할당 및 반환
- 배열의 동적 할당과 같다
- 멤버의 접근 방법은 평소의 객체 배열과 같음
	- [] 과 .
	- (p+i) 과 ->
### 메모리 누수
- 프로그램이 종료되면, 운영체제는 누수 메모리를 모두 힙에 반환
	```cpp
	char n = 'a';
	char *p = new char[1024];
	p = &n; // char[1024] 누수 메모리 발생
	```
## this 와 객체
- this는 객체 자기 자신을 가리키는 객체 자신 포인터
- 멤버 함수 안에서만 쓰이며, 멤버 함수에 컴파일러에 의해 묵시적으로 삽입 선언되는 매개 변수
```cpp
class Sample{
   int a;
public:
	void setA(Sample* this, int x){ // Sample* this 는 컴파일러가 선언한 매개변수임.
	this->a = x;}
}
```
## string 클래스를 이용한 문자열
- \<string> 헤더 파일에 선언
- 가변 크기의 문자열
- new/delete 를 이용하여 문자여을 동적 생성/반환 가능
```cpp
string str;
string address("서울시 성북구 삼선동 389");
string copyAddress(address);
```
